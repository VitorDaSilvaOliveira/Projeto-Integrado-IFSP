@using System.Security.Claims
@using Estoque.Domain.Entities
@using Estoque.Infrastructure.Utils
@using Microsoft.AspNetCore.Identity
@using Estoque.Lib.Resources
@using Microsoft.Extensions.Localization
@inject UserManager<ApplicationUser> UserManager
@inject IStringLocalizer<EstoqueResources> Localizer

@{
    // MUDANÇA: Novo Título da Página
    ViewBag.Title = Localizer["DashboardPedidos"];
}

<div class="row">

    <div class="col-sm-12 mb-4">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="mb-3 text-center">@Localizer["OrdersByOperationTitle"]</h5>
                <canvas id="operacaoChart"></canvas>
            </div>
        </div>
    </div>

    <div class="col-sm-6 mb-4">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex justify-content-center">
                    <div>
                        <h5 class="mb-3">@Localizer["OrdersByStatusTitle"]</h5>
                    </div>
                </div>
                <div class="d-flex justify-content-center p-1">
                    <canvas id="statusChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div class="col-sm-6 mb-4">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex justify-content-center">
                    <div>
                        <h5 class="mb-3">@Localizer["MonthlyRevenueEvolutionTitle"]</h5>
                    </div>
                </div>
                <div class="d-flex justify-content-center p-1">
                    <canvas id="faturamentoMensalChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<script>
    // MUDANÇA: Adicionando novos rótulos de tradução para os gráficos
    const textTranslated = {
        // Rótulos usados no gráfico central (Operação)
        sales: "@Localizer["Sales"]", // Ex: "Vendas"
        exchanges: "@Localizer["Exchanges"]", // Ex: "Trocas"

        // Rótulo usado no gráfico de Linha (Faturamento)
        totalRevenue: "@Localizer["TotalRevenue"]", // Ex: "Faturamento Total"

        // Rótulos de unidades
        orders: "@Localizer["Pedidos"]", // Ex: "Pedidos"
        currency: "@Localizer["Currency"]" // Ex: "R$" ou "Moeda"
    };
</script>

<script src="~/js/dashboardpedidos.js" asp-append-version="true"></script>

